## 2023-07-29 14:38:54
* 学习设计一个RGB到YCbCr的格式转换算法

## 2023-08-05 09:41:41
* 学习一个直方图均衡的算法
    * BRAM写入时需要控制地址防止发生冲突
    * 具体的措施如下
        * 先读取对应的BRAM地址
        * 判断下一个地址是否相等
        * 不同地址则更新读取的地址
        * 相同地址则更新写入的累加量
        * 同时需要适应不同的存储器
    * 抽象模型
        * 记录BRAM所有地址写入次数的模块
    * 问题
        * 对于乱序写入的数据进行同读和同写是无法保证地址不冲突的
        * 为了保证不冲突，需要做出如下的改变
        * 读取地址一定是原始图像数据
        * 所以写入地址应具备自动识别的功能
        * 但是识别会导致前几级的结果需要进行缓存
        * 实际上需要的是一个宽度等于读取周期的同步器
    * 则最终的解决方案是
        * 读取地址发生更新，切换新的地址，同时清空同步计数器
        * 每个延时周期都将地址合并至对应的地址
        * {合并数据量+实际地址}
        * 直到完成最小间隔等于BRAM延时周期的合并
        * 将合并的信号更新到BRAM
* 时序
![timing.png](./timing.png)
* 将SYNC信号依次合并至BRAM支持的频率
* 根据实际的设计情况
    * 信号合并需要缓存的情况太多
    * 需要搭建一个专门的数据模型
    * 最麻烦的是地址和数量的处理
    * 最简单的方法是串行转并行处理
* 将重复的1以累加的形式统计出来后并行写入到结果